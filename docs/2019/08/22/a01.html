<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å¼€å‘ä¸€ä¸ªwebéŸ³ä¹æ’­æ”¾å™¨åˆ°åº•æœ‰å¤šéš¾ï¼Ÿ - ä¸€ä¸ªçƒçš„åšå®¢</title>
    <link rel="shortcut icon" href="/favicon.png" type="image/x-icon" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="/assets/css/normalize.css" />
<link rel="stylesheet" href="/assets/css/index.min.css" />
<link rel="stylesheet" href="/assets/css/rouge-syntax.css">
<meta name="keywords" content="ä¸€ä¸ªçƒ,å‰ç«¯,ç½‘é¡µ,web,æŠ€æœ¯,css3,html5,frontend,front-end,ableton,live,music,production,ç¼–æ›²,éŸ³ä¹åˆ¶ä½œ,åˆ¶ä½œäºº,æ‘„å½±,JavaScript,éŸ³ä¹æ’­æ”¾å™¨,Web App" id="keywords" />
<meta name="description" content="Front-end Developer / Music Producer" />
    
  </head>
  <body>
    <div id="app">
      <div class="app-wrap">
        <header>
  <div class="logo">
    <a href="/" title="Click here to navigate homepage" id="header">
      <div class="img">
        <img src="/assets/img/logo-black.png" alt="logo" class="dark" />
        <img src="/assets/img/logo.png" alt="logo" class="light" />
      </div>
    </a>
  </div>
  <div class="slogan" ref="slogan">
    Front-end Developer / Music Producer
  </div>
  <div class="page-small-menu" v-if="page_small">
    <ul>
      
      <li>
        <a href="/about/">About Me</a>
      </li>
      
      <li>
        <a href="/atom.xml" target="_blank">RSS</a>
      </li>
    </ul>
  </div>
</header>
        <div class="page-wrap">
          <section class="pages" style="padding-top: 20px">
            <div class="page">
              <div class="wrap">
                <h2 class="page-header">å¼€å‘ä¸€ä¸ªwebéŸ³ä¹æ’­æ”¾å™¨åˆ°åº•æœ‰å¤šéš¾ï¼Ÿ</h2>
                 
                <div class="page-date">
                  <span>ğŸ‘¨â€ğŸ’»: 2019-08-22</span>
                  
                  <span> <br />âœ: 2020-10-17</span>
                  
                </div>
                
                <div class="page-content"><p>å‰æ®µæ—¶é—´æ¯”è¾ƒé—²ï¼Œé¡ºä¾¿å°±å¼€å‘äº†è‡ªå·±çš„éŸ³ä¹ä¸»é¡µğŸ‘‰<a href="https://music.jw1.dev">https://music.jw1.dev</a>ï¼Œå¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°ä¸å°‘é—®é¢˜ï¼Œä¸€åº¦ä»¥ä¸ºè§£å†³ä¸äº†ï¼Œä½†æ˜¯æœ€åçœ‹æ¥ï¼Œå…¶å®å®ç°éƒ½éå¸¸ç®€å•ã€‚</p>
<p>é¦–å…ˆçœ‹çœ‹htmlå§</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;audio</span> <span class="na">src=</span><span class="s">"path/to/your/audio/file"</span><span class="nt">&gt;&lt;/audio&gt;</span>

<span class="c">&lt;!-- æˆ–è€… --&gt;</span>
<span class="nt">&lt;audio&gt;</span>
    <span class="nt">&lt;source</span> <span class="na">src=</span><span class="s">"path/to/your/audio/file"</span> <span class="na">type=</span><span class="s">"audio/mpeg"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/audio&gt;</span>
</code></pre></div></div>
<p>è¿™æ—¶å€™æ‰“å¼€é¡µé¢ä½ ä¼šå‘ç°...ä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;audio</span> <span class="na">src=</span><span class="s">"path/to/your/audio/file"</span> <span class="na">controls</span><span class="nt">&gt;&lt;/audio&gt;</span>
</code></pre></div></div>
<p>åŠ ä¸Š<code>controls</code>è¿™ä¸ªå±æ€§ï¼Œæµè§ˆå™¨æ‰ä¼šæ˜¾ç¤ºåŸç”Ÿçš„éŸ³é¢‘ç»„ä»¶ã€‚è‡³äºæµè§ˆå™¨å…¼å®¹æ€§æˆ‘å°±ä¸è®²äº†ï¼Œè¿˜æ˜¯è€æ ·å­æ‰”ä¸ªMDNé“¾æ¥åœ¨è¿™é‡ŒğŸ˜ï¼š<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/audio#Browser_compatibility">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/audio#Browser_compatibility</a></p>
<p>æ‰€ä»¥ï¼Œæå®šäº†ï¼Ÿ</p>
<p>ä¸ï¼åƒæˆ‘è¿™ç§æœ‰å¼ºè¿«ç—‡çš„äººï¼Œæ€ä¹ˆå¯èƒ½è®©æ¯ä¸ªæµè§ˆå™¨çš„æ˜¾ç¤ºéƒ½ä¸ä¸€è‡´ï¼</p>
<p>è¦åšçš„ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯ï¼Œéšè—<code>audio</code>çš„åŸç”Ÿæ§åˆ¶ç»„ä»¶ï¼š</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;audio</span> <span class="na">src=</span><span class="s">"path/to/your/audio/file"</span><span class="nt">&gt;&lt;/audio&gt;</span>
<span class="c">&lt;!-- å»æ‰ controls --&gt;</span>
</code></pre></div></div>
<p>(ğŸ‘†ä¸‰éäº†ğŸ¤£</p>
<p>ç„¶åç”¨CSSå°†<code>audio</code> ç§»å‡ºæ–‡æ¡£æµï¼š</p>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">audio</span><span class="p">{</span><span class="nl">position</span><span class="p">:</span><span class="nb">fixed</span><span class="p">;</span><span class="nl">top</span><span class="p">:</span><span class="m">0</span><span class="p">;</span><span class="nl">left</span><span class="p">:</span><span class="m">-12138px</span><span class="p">;}</span>
</code></pre></div></div>
<p>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ</p>
<p>â€”â€” ä¸ºäº†é¿å…ä¸€äº›éä¸»æµçš„æµè§ˆå™¨ä¼šè®©<code>audio</code>åœ¨æ²¡æœ‰<code>controls</code>å±æ€§çš„æƒ…å†µä¸‹å‡ºç°åœ¨ä¸åº”è¯¥å‡ºç°çš„åœ°æ–¹ã€‚(å¥½ç´¯</p>
<p>æ¥ä¸‹æ¥çœ‹JSçš„éƒ¨åˆ†</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">audio</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">audio</span><span class="dl">'</span><span class="p">)</span>

<span class="c1">// æˆ–è€…ç”¨jQuery</span>
<span class="kd">let</span> <span class="nx">audio</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">audio</span><span class="dl">'</span><span class="p">)</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">audio</span><span class="p">)</span>
</code></pre></div></div>
<p>åŸç”ŸJavaScriptåœ¨logä¸‹åªèƒ½çœ‹åˆ°æ ‡ç­¾ï¼Œè€ŒjQueryåˆ™ä¼šæŠŠæ‰€æœ‰å’Œè¿™ä¸ªå…ƒç´ æœ‰å…³çš„ä¸œè¥¿éƒ½åˆ—å‡ºæ¥ï¼Œä¸è®ºæ˜¯æœ‰ç”¨çš„è¿˜æ˜¯æ²¡æœ‰ç”¨çš„ã€‚ä½†æ˜¯çŸ¥é“æœ‰é‚£ä¹ˆå¤šå±æ€§/äº‹ä»¶å¯ä»¥ç”¨æ˜¯ä»¶å¥½äº‹ï¼Œåœ¨è¿™é‡Œè¯´å‡ æ ·æ¯”è¾ƒé‡è¦çš„ã€‚</p>
<blockquote>
<p>æ¥ä¸‹æ¥jsåŒºåŸŸä¸­çš„<code>audio</code>éƒ½æ˜¯ä»¥åŸç”Ÿjsè·å–çš„å¯¹è±¡ï¼Œå¦‚æœä½ ä½¿ç”¨jQueryï¼Œaudioèµ‹å€¼åº”è¯¥ä¸º</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">audio</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">audio</span><span class="dl">'</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</code></pre></div></div>
</blockquote>
<h4 id="audioplay"># audio.play()</h4>
<p>å¯ä»¥è°ƒç”¨æ­¤æ–¹æ³•æ¥æ’­æ”¾éŸ³é¢‘ã€‚å› ä¸ºå¸‚é¢ä¸Šå¤§å¤šæ•°æµè§ˆå™¨ä¸å…è®¸ç›´æ¥ç”¨jsè§¦å‘éŸ³ä¹æ’­æ”¾ï¼Œå¿…é¡»è¦ç”±ç”¨æˆ·æ¥è§¦å‘è¯¥äº‹ä»¶('click', 'scroll', 'focus', etc.)ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åŠ ä¸€ä¸ªæ’­æ”¾æŒ‰é’®æ¥è§¦å‘äº‹ä»¶ï¼š</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;audio</span> <span class="na">src=</span><span class="s">"path/to/your/audio/file"</span><span class="nt">&gt;&lt;/audio&gt;</span>

<span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"play"</span><span class="nt">&gt;</span>play<span class="nt">&lt;/button&gt;</span>
</code></pre></div></div>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// è·å–play button</span>
<span class="kd">let</span> <span class="nx">playBtn</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.play</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// ç»™play buttonæ·»åŠ ç‚¹å‡»äº‹ä»¶</span>
<span class="nx">playBtn</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
    
    <span class="c1">// play button ç‚¹å‡»åæ’­æ”¾éŸ³é¢‘</span>
    <span class="nx">audio</span><span class="p">.</span><span class="nx">play</span><span class="p">()</span>
<span class="p">})</span>
</code></pre></div></div>
<h4 id="audiopause-amp-audiopaused"># audio.pause() &amp; audio.paused</h4>
<p>è°ƒç”¨<code>audio.pause()</code>æ¥æš‚åœéŸ³é¢‘ã€‚</p>
<p>è°ƒç”¨<code>audio.paused</code>æ¥è·å–éŸ³é¢‘æš‚åœçŠ¶æ€ï¼Œ<code>true</code>ä¸ºæš‚åœçŠ¶æ€ï¼Œ<code>false</code>åˆ™ä¸ºæ’­æ”¾çŠ¶æ€ã€‚</p>
<p>æ¯”å¦‚æˆ‘ç°åœ¨éœ€è¦å†ç‚¹å‡»ä¸€æ¬¡play buttonæ¥æš‚åœéŸ³é¢‘ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">playBtn</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
    
    <span class="c1">// ç‚¹å‡»ååˆ¤æ–­éŸ³é¢‘æ˜¯å¦ä¸ºæš‚åœçŠ¶æ€</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">audio</span><span class="p">.</span><span class="nx">paused</span><span class="p">){</span>
        
        <span class="c1">// å¦‚æœaudio.pausedä¸ºtrue</span>
        <span class="c1">// åˆ™éŸ³é¢‘ä¸ºæš‚åœçŠ¶æ€</span>
        <span class="c1">// è¿™æ—¶å€™æˆ‘ä»¬å°±è¦æ’­æ”¾éŸ³é¢‘</span>
        <span class="c1">// åŒæ—¶ä¿®æ”¹buttonçš„æ–‡å­—ä¸ºpause</span>
        <span class="nx">audio</span><span class="p">.</span><span class="nx">play</span><span class="p">()</span>
        <span class="nx">playBtn</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">pause</span><span class="dl">'</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        
        <span class="c1">// å¦‚æœaudio.pausedä¸ºfalse</span>
        <span class="c1">// åˆ™éŸ³é¢‘ä¸ºæ’­æ”¾çŠ¶æ€</span>
        <span class="c1">// è¿™æ—¶å€™æˆ‘ä»¬å°±è¦æš‚åœéŸ³é¢‘</span>
        <span class="c1">// åŒæ—¶ä¿®æ”¹buttonçš„æ–‡å­—ä¸ºplay</span>
        <span class="nx">audio</span><span class="p">.</span><span class="nx">pause</span><span class="p">()</span>
        <span class="nx">playBtn</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">play</span><span class="dl">'</span>
    <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div>
<h4 id="audiocurrenttime"># audio.currentTime</h4>
<p>è°ƒç”¨æ­¤å±æ€§è·å–éŸ³é¢‘å½“å‰å·²æ’­æ”¾æ—¶é—´ã€‚</p>
<p>ä¿®æ”¹æ­¤å±æ€§å¯ä»¥è¾¾åˆ°åˆ‡æ¢éŸ³é¢‘å½“å‰æ’­æ”¾ä½ç½®çš„åŠŸèƒ½ï¼š</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// å¿«è¿›åç§’</span>
<span class="nx">fastForward</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">audio</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">=</span> <span class="nx">audio</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">+</span> <span class="mi">10</span>
<span class="p">}</span>
<span class="nx">fastForward</span><span class="p">()</span>
</code></pre></div></div>
<h4 id="audioduration"># audio.duration</h4>
<p>è°ƒç”¨æ­¤å±æ€§è·å–éŸ³é¢‘çš„é•¿åº¦ï¼Œå•ä½ä¸ºç§’ã€‚</p>
<p><strong>å·²çŸ¥é—®é¢˜</strong>ï¼š</p>
<ol>
<li>åœ¨<code>Firefox</code>ä¸Šä¼šå‡ºç°è¯»ä¸åˆ°durationçš„æƒ…å†µï¼Œå¯èƒ½å’Œä¿®æ”¹<code>audio.src</code>æœ‰å…³ï¼Œæˆ‘åœ¨è‡ªå·±é¡¹ç›®ä¸­çš„åšæ³•æ˜¯ä½¿ç”¨äº†<code>ffmpeg</code>è¯»å–å‡ºdurationï¼Œç›´æ¥å½“ä½œå˜é‡ä½¿ç”¨ï¼Œæ²¡æœ‰ä½¿ç”¨æµè§ˆå™¨ç»™çš„è¿™ä¸ªå±æ€§ã€‚</li>
</ol>
<h4 id="audioontimeupdate"># audio.ontimeupdate</h4>
<p>æ­¤æ–¹æ³•åœ¨éŸ³é¢‘æ’­æ”¾æœŸé—´ä¼šå¾ªç¯è°ƒç”¨ï¼Œç»æµ‹è¯•ï¼Œè°ƒç”¨é—´éš”å¤§çº¦ä¸º200msä¸€æ¬¡ã€‚</p>
<p>æ­¤æ–¹æ³•å¯ä»¥ç”¨åœ¨æ›´æ–°éŸ³é¢‘è¿›åº¦æ¡ä¸Šã€‚æœ‰äº†ä¸Šé¢çš„<code>audio.currentTime</code>å’Œ<code>audio.duration</code>ï¼Œæˆ‘ä»¬å¯ä»¥ç®—å‡ºå½“å‰éŸ³é¢‘æ’­æ”¾è¿›åº¦çš„ç™¾åˆ†æ¯”ï¼š</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// å°†ç™¾åˆ†æ¯”å®šä¸ºå…¨å±€å˜é‡</span>
<span class="kd">let</span> <span class="nx">audioProgressPercent</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nx">audio</span><span class="p">.</span><span class="nx">ontimeupdate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    
    <span class="c1">// åœ¨audioæ—¶é—´æ›´æ–°çš„æ—¶å€™è®¡ç®—å½“å‰è¿›åº¦ç™¾åˆ†æ¯”</span>
    <span class="nx">audioProgressPercent</span> <span class="o">=</span> <span class="nx">audio</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">/</span> <span class="nx">audio</span><span class="p">.</span><span class="nx">duration</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">audioProgressPercent</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>
<p>è¿™ä¸ªæ—¶å€™å¦‚æœä½ æ‰“å¼€é¡µé¢å¼€å§‹æ’­æ”¾éŸ³é¢‘ï¼Œå°±ä¼šçœ‹åˆ°æ§åˆ¶å°ä¸€ç›´åœ¨æ›´æ–°è¿›åº¦ç™¾åˆ†æ¯”äº†ï¼Œè‡³äºè¿™ä¸ªæ•°å€¼æ€ä¹ˆç”¨ï¼Œä¸ç”¨æˆ‘æ•™å¤§å®¶äº†å§ã€‚ğŸ˜</p>
<h4 id="audiobuffered"># audio.buffered</h4>
<p>è°ƒç”¨æ­¤å±æ€§å¯ä»¥è·å–å½“å‰éŸ³é¢‘çš„ç¼“å†²è¿›åº¦å’ŒåŒºé—´ï¼š</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// æ¯200msè·å–ä¸€æ¬¡ç¼“å†²åŒºé—´</span>
<span class="kd">let</span> <span class="nx">bufferedTimeInterval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

    <span class="c1">// ç¼“å†²å¯ä»¥æœ‰å¤šä¸ªåŒºé—´</span>
    <span class="c1">// æ‰€ä»¥æˆ‘ä»¬å°½é‡éƒ½è·å–åˆ°</span>
    <span class="kd">let</span> <span class="nx">bufferedLength</span> <span class="o">=</span> <span class="nx">audio</span><span class="p">.</span><span class="nx">buffered</span><span class="p">.</span><span class="nx">length</span>

    <span class="c1">// ä»¥bufferedLengthåšå¾ªç¯</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">bufferedLength</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">bufferedStart</span> <span class="o">=</span> <span class="nx">audio</span><span class="p">.</span><span class="nx">buffered</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nx">bufferedEnd</span> <span class="o">=</span> <span class="nx">audio</span><span class="p">.</span><span class="nx">buffered</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">bufferedStart</span><span class="p">,</span> <span class="nx">bufferedEnd</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">},</span><span class="mi">200</span><span class="p">)</span>
</code></pre></div></div>
<p>æ§åˆ¶å°è¾“å‡ºï¼š</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; 0 17.64
  56.45 78.90
</code></pre></div></div>
<p>è¾“å‡ºçš„å«ä¹‰ä¸ºï¼š</p>
<p>è¿™ä¸€æ¬¡è¯»å–<code>audio.buffered</code>å¾—åˆ°äº†ä¸¤ä¸ªåŒºé—´ï¼Œæ‰€ä»¥å¾ªç¯äº†ä¸¤æ¬¡ã€‚</p>
<p>ç¬¬ä¸€æ¬¡è·å¾—çš„åŒºé—´æ˜¯<code>[0,17.64]</code>ï¼Œä»£è¡¨ç¬¬0ç§’åˆ°ç¬¬17.64ç§’ä¹‹é—´çš„éŸ³é¢‘å·²ç»ç¼“å†²å¥½äº†ï¼Œå¯ä»¥ç›´æ¥æ’­æ”¾ã€‚</p>
<p>ç¬¬äºŒæ¬¡è·å¾—çš„åŒºé—´æ˜¯<code>[56.45,78.90]</code>ï¼Œä»£è¡¨è¿™ä¸¤ä¸ªæ•°å­—ä¹‹é—´çš„éŸ³é¢‘å·²ç»ç¼“å†²å¥½äº†ï¼Œå¯ä»¥ç›´æ¥æ’­æ”¾ã€‚</p>
<h4 id="audioonwaiting-amp-audioonplay"># audio.onwaiting &amp; audio.onplay</h4>
<p><code>audio.onwaiting</code>ä¼šåœ¨éŸ³é¢‘å¼€å§‹ç¼“å†²çš„æ—¶å€™è¢«æ¿€æ´»ï¼›</p>
<p><code>audio.onplay</code>ä¼šåœ¨éŸ³é¢‘å¼€å§‹æ’­æ”¾çš„æ—¶å€™è¢«æ¿€æ´»ï¼›</p>
<p>è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªloadingçš„åŠ¨ç”»ï¼Œå‘Šè¯‰ç”¨æˆ·éŸ³é¢‘æ­£åœ¨åŠ è½½äº†ï¼š</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">audio</span><span class="p">.</span><span class="nx">onwaiting</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">audio is loading</span><span class="dl">'</span><span class="p">)</span>
    <span class="c1">// åœ¨è¿™é‡Œæ¿€æ´»loadingåŠ¨ç”»</span>
<span class="p">}</span>
<span class="nx">audio</span><span class="p">.</span><span class="nx">onplay</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">audio is playing</span><span class="dl">'</span><span class="p">)</span>
    <span class="c1">// åœ¨è¿™é‡Œå…³é—­loadingåŠ¨ç”»</span>
<span class="p">}</span>
</code></pre></div></div>
<h4 id="audioended-amp-audiosrc"># audio.ended &amp; audio.src</h4>
<p><code>audio.ended</code>é¡¾åæ€ä¹‰ï¼Œä¼šåœ¨éŸ³é¢‘ç»“æŸåè¢«æ¿€æ´»ï¼›</p>
<p><code>audio.src</code>æ˜¯éŸ³é¢‘æ–‡ä»¶çš„ä½ç½®ï¼Œå¯ä¿®æ”¹ï¼›</p>
<p>å½“ä½ æœ‰ä¸€ä¸ªæ’­æ”¾åˆ—è¡¨ï¼Œä¸”æƒ³åœ¨éŸ³é¢‘ç»“æŸåæ’­æ”¾ä¸‹ä¸€é¦–æ­Œï¼Œä½ å°±å¯ä»¥ï¼š</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// å®šä¹‰æ’­æ”¾åˆ—è¡¨</span>
<span class="kd">let</span> <span class="nx">playList</span> <span class="o">=</span> <span class="p">[</span>
    <span class="dl">'</span><span class="s1">path/to/song1</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">path/to/song2</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">path/to/song3</span><span class="dl">'</span>
<span class="p">]</span>

<span class="c1">// å®šä¹‰å½“å‰æ’­æ”¾æ­Œæ›²çš„ID</span>
<span class="kd">let</span> <span class="nx">currentSongID</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// éŸ³é¢‘ç»“æŸåè‡ªåŠ¨æ’­æ”¾ä¸‹ä¸€é¦–</span>
<span class="nx">audio</span><span class="p">.</span><span class="nx">onended</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    
    <span class="c1">// æ›´æ–°å½“å‰æ’­æ”¾æ­Œæ›²çš„ID</span>
    <span class="nx">currentSongID</span> <span class="o">=</span> <span class="nx">currentSongID</span> <span class="o">+</span> <span class="mi">1</span>
    
    <span class="c1">// å¦‚æœå½“å‰æ’­æ”¾æ­Œæ›²ä¸ºæ’­æ”¾åˆ—è¡¨ä¸­æœ€åä¸€é¦–</span>
    <span class="c1">// å°±ä»ç¬¬ä¸€é¦–å¼€å§‹æ”¾</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">currentSongID</span> <span class="o">&gt;=</span> <span class="nx">playList</span><span class="p">.</span><span class="nx">length</span><span class="p">){</span>
        <span class="nx">currentSongID</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="p">}</span>
    
    <span class="c1">// æ”¹å˜audioçš„srcå±æ€§</span>
    <span class="nx">audio</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">playList</span><span class="p">[</span><span class="nx">currentSongID</span><span class="p">]</span>
    <span class="nx">audio</span><span class="p">.</span><span class="nx">play</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></div>
<p>å“¦è¿˜æœ‰ï¼</p>
<h4 id="audiovolume"># audio.volume</h4>
<p>è°ƒç”¨è·å–éŸ³é¢‘çš„éŸ³é‡ï¼Œå¯ä¿®æ”¹ï¼›</p>
<p>å¯ä»¥åšç‚¹fade in / fade outçš„æ•ˆæœï¼Œä½¿ç”¨jQueryå¯ä»¥å¾ˆç®€å•çš„åšå‡ºæ¥ï¼ŒåŸæ–‡ä¸­ä¹Ÿæœ‰åŸç”Ÿjsçš„å®ç°æ–¹æ³•(å¤ªé•¿æ²¡çœ‹</p>
<blockquote>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$audio</span><span class="p">.</span><span class="nx">animate</span><span class="p">({</span><span class="na">volume</span><span class="p">:</span> <span class="nx">newVolume</span><span class="p">},</span> <span class="mi">1000</span><span class="p">)</span>
</code></pre></div></div>
</blockquote>
<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://stackoverflow.com/questions/7451508/html5-audio-playback-with-fade-in-and-fade-out">https://stackoverflow.com/questions/7451508/html5-audio-playback-with-fade-in-and-fade-out</a></p>
<p>å¥½äº†ï¼Œä»¥ä¸Šå°±æ˜¯æˆ‘å¼€å‘éŸ³ä¹ä¸»é¡µä¹‹åæƒ³å’Œå¤§å®¶åˆ†äº«çš„ã€‚</p>
<p>è‡³äºé¢˜ä¸­çš„é—®é¢˜ï¼Œæˆ‘çš„ç­”æ¡ˆæ˜¯ï¼šçœŸçš„å¾ˆç®€å•ã€‚</p>
<p>åªæ˜¯jsæœ‰ä¸€äº›æ€§èƒ½ä¸Šçš„é™åˆ¶ï¼Œä¸èƒ½ä»€ä¹ˆåŠŸèƒ½éƒ½å¾€ç½‘é¡µä¸Šæ¬...</p>
<p>åœ¨æˆ‘çš„éŸ³ä¹ä¸»é¡µä¸­æœ‰ä¸€ä¸ªç æ‰çš„åŠŸèƒ½</p>
<p>â€”â€” èŠ‚æ‹å™¨</p>
<p>ä¸ºå•¥ç æ‰äº†å‘¢...</p>
<p>å› ä¸ºjsçš„å¤„ç†æ•ˆç‡çœŸçš„ä¸é«˜(æˆ–è€…åªæ˜¯æˆ‘å¤ªè¾£é¸¡)ï¼Œä¸­ä½ç«¯æ‰‹æœºåšå‡ºæ¥çš„èŠ‚æ‹å™¨æ ¹æœ¬ä¸å‡†ï¼Œè‡³äºå®ç°åŸç†ï¼Œå¾ˆç®€å•ï¼š</p>
<p>æ­Œæ›²çš„bpm(beat per minute)æ˜¯å·²çŸ¥çš„ï¼š</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// å‡è®¾ç°åœ¨æˆ‘æœ‰ä¸€é¦–æ­Œbpmä¸º120</span>
<span class="kd">let</span> <span class="nx">bpm</span> <span class="o">=</span> <span class="mi">120</span>

<span class="c1">// æ¯40æ¯«ç§’æ›´æ–°ä¸€æ¬¡ï¼Œç›®çš„æ˜¯è®©bpmæ›´æ–°ä¸ä½äº24fps</span>
<span class="c1">// ç„¶è€Œä¸­ä½ç«¯æ‰‹æœºçš„æ•ˆæœå´ä¸å°½äººæ„</span>
<span class="c1">// pcç«¯å€’æ˜¯æ²¡å•¥é—®é¢˜</span>
<span class="kd">let</span> <span class="nx">bpmTimeInterval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="c1">// è®¡ç®—æ¯ç§’æœ‰å¤šå°‘beats</span>
    <span class="kd">let</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">bpm</span> <span class="o">/</span> <span class="mi">60</span>
    
    <span class="c1">// _bä¼šåœ¨æ—¶é—´çº¿å‘ˆç°å‡ºä¸€ä¸ªé”¯é½¿çŠ¶çš„å›¾å½¢</span>
    <span class="c1">// æœ€é«˜é‚£ä¸ªç‚¹ï¼Œä¹Ÿå°±æ˜¯é½¿å°–ï¼Œå°±æ˜¯ä¸€ä¸ªbeat</span>
    <span class="kd">let</span> <span class="nx">_b</span> <span class="o">=</span> <span class="nx">audio</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">%</span> <span class="nx">interval</span>
    <span class="c1">// ...</span>
<span class="p">},</span><span class="mi">40</span><span class="p">)</span>
</code></pre></div></div>
<p>å¸Œæœ›æœ‰ä¸€å¤©jsèƒ½æœ‰å¼€å‘Digital Audio Workstationçš„èƒ½åŠ›ï¼</p>
<p>âœŒ</p>
</div>
                <div class="page-original">
                  <a class="license" rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Creative Commons License" style="border-width: 0" src="/assets/img/cc.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a>.
                </div>
                <div id="cusdis_thread"
                     data-host="https://cusdis.jw1.dev"
                     data-app-id="e724ea5c-1b42-4ea9-9a16-93bd90adcea9"
                     data-page-id="/2019/08/22/a01"
                     data-page-url="/2019/08/22/a01.html"
                     data-page-title="å¼€å‘ä¸€ä¸ªwebéŸ³ä¹æ’­æ”¾å™¨åˆ°åº•æœ‰å¤šéš¾ï¼Ÿ"
                     data-theme="auto"
                ></div>
              </div>
            </div>
          </section>
          <section class="aside" v-if="!page_small" aria-label="aside">
            <ul>
              
              <li>
                <a href="/about/" title="About Me">ğŸ‘¦ About Me</a>
              </li>
              
              <li>
                <a href="/atom.xml" title="RSS feeds" target="_blank">ğŸš© RSS</a>
              </li>
            </ul>
          </section>
        </div>
        <footer>Â© <span class="copy_right_year">2018 - 2021</span><a href="/" class="footer-link">ä¸€ä¸ªçƒçš„åšå®¢</a>code with â¤</footer>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.min.js"></script>
    <script defer src="https://cusdis.jw1.dev/js/widget/lang/zh-cn.js"></script>
    <script async defer src="https://cusdis.jw1.dev/js/cusdis.es.js"></script>
    
    <script src="/assets/js/post.js"></script>
  </body>
</html>
