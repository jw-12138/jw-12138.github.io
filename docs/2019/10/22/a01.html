<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GitHub OAuth Appæ€ä¹ˆè·³è½¬åˆ°ç”¨æˆ·æˆæƒä¹‹å‰çš„é¡µé¢ï¼Ÿ - ä¸€ä¸ªçƒçš„åšå®¢</title>
    <link rel="shortcut icon" href="/favicon.png" type="image/x-icon" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fira+Mono&family=Lexend&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="/assets/css/index.min.css" />
<meta name="keywords" content="ä¸€ä¸ªçƒ,å‰ç«¯,ç½‘é¡µ,web,æŠ€æœ¯,css3,html5,frontend,front-end,ableton,live,music,production,ç¼–æ›²,éŸ³ä¹åˆ¶ä½œ,åˆ¶ä½œäºº,æ‘„å½±,GitHub,OAuth,Web App" id="keywords" />
<meta name="description" content="Front-end Developer / Music Producer" />
    
  </head>
  <body>
    <div id="app">
      <div class="app-wrap">
        <header>
  <div class="logo">
    <a href="/" title="Click here to navigate homepage" id="header">
      <div class="img">
        <img src="/assets/img/logo-black.png" alt="logo" class="dark" />
        <img src="/assets/img/logo.png" alt="logo" class="light" />
      </div>
    </a>
  </div>
  <div class="slogan" ref="slogan">
    Front-end Developer / Music Producer
  </div>
  <div class="page-small-menu" v-if="page_small">
    <ul>
      
      <li>
        <a href="/about/">About Me</a>
      </li>
      
      <li>
        <a href="/atom.xml" target="_blank">RSS</a>
      </li>
    </ul>
  </div>
</header>
        <div class="page-wrap">
          <section class="pages" style="padding-top: 20px">
            <div class="page">
              <div class="wrap">
                <h2 class="page-header">GitHub OAuth Appæ€ä¹ˆè·³è½¬åˆ°ç”¨æˆ·æˆæƒä¹‹å‰çš„é¡µé¢ï¼Ÿ</h2>
                 
                <div class="page-date">
                  <span>ğŸ‘¨â€ğŸ’» 2019-10-22</span>
                  
                  <span> <br />âœ 2019-12-10</span>
                  
                </div>
                
                <div class="page-content"><p>æœ€è¿‘å®Œæˆäº†åšå®¢çš„è¯„è®ºç³»ç»Ÿï¼Œç¬¬ä¸‰æ–¹ç™»å½•ä½¿ç”¨äº†GitHub OAuth Appã€‚è‡³äºæ•™ç¨‹æˆ–è€…ç¤ºä¾‹ï¼Œéšä¾¿è°·æ­Œã€ç™¾åº¦ä¸€ä¸‹éƒ½æ˜¯ä¸€å¤§ç‰‡ï¼Œæˆ–è®¸æ­£æ˜¯å› ä¸ºæŸ¥çš„å¤ªå¤šäº†ï¼Œä»¥è‡³äºæ‰€æœ‰çš„æ•™ç¨‹éƒ½åœ¨å‘Šè¯‰ä½ æ€ä¹ˆæ³¨å†Œã€æ€ä¹ˆè°ƒç”¨APIã€æ€ä¹ˆç”¨XXXåç«¯è·å–æ•°æ®ç­‰ç­‰ç­‰ç­‰...</p>
<p>ä½†æ˜¯ä»–ä»¬å¥½åƒéƒ½å¿½ç•¥äº†ä¸€ä¸ªé—®é¢˜ï¼š</p>
<p>â€”â€” <strong>åœ¨è·å–Tokenæˆ–è€…ç”¨æˆ·ä¿¡æ¯ä¹‹åï¼Œå®¢æˆ·ç«¯è¦æ€ä¹ˆè·³è½¬å›ç”¨æˆ·æˆæƒä¹‹å‰çš„é¡µé¢ï¼Ÿ</strong></p>
<p>å…ˆå£°æ˜ä¸€ä¸‹ï¼Œè¿™ç¯‡æ–‡ç« ä¸ä¼šæ•™ä½ æ€ä¹ˆæ³¨å†Œæˆ–ä½¿ç”¨GitHub OAuth Appï¼Œå¦‚æœä½ è¿˜ä¸ç†Ÿæ‚‰å®ƒï¼Œå¯ä»¥å…ˆé˜…è¯»ä¸€ä¸‹<a href="https://developer.github.com/apps/building-oauth-apps/">å®˜æ–¹æ–‡æ¡£</a>ï¼Œå¦‚æœä½ ä¸å¤ªå–œæ¬¢è‹±è¯­ï¼Œå¯ä»¥çœ‹çœ‹é˜®ä¸€å³°çš„<a href="http://www.ruanyifeng.com/blog/2019/04/github-oauth.html">GitHub OAuth ç¬¬ä¸‰æ–¹ç™»å½•ç¤ºä¾‹æ•™ç¨‹</a>æˆ–è€…å…¶ä»–å¤§ä½¬/è®ºå›çš„æ•™ç¨‹ã€‚</p>
<p>å¥½äº†ï¼Œå…ˆçœ‹ä¸€ä¸‹GitHub OAuthçš„æµç¨‹ï¼š</p>
<ol>
<li>æµè§ˆå™¨å¸¦ <code>client_id</code> å’Œ <code>redirect_uri</code> è·³è½¬åˆ°GitHub</li>
<li>ç”¨æˆ·æˆæƒ</li>
<li>å¦‚æœç”¨æˆ·åŒæ„æˆæƒï¼ŒGitHubä¼šè¿”å›ä¸€ä¸ª<code>code</code>å‚æ•°ï¼Œå½¢å¼ä¸º <code>https://redirect_uri?code=xxxxxxxxxxxxx</code></li>
<li>å®¢æˆ·ç«¯å¸¦<code>code</code> <code>client_id</code> å’Œ <code>client_secret</code>å‘é€POSTè¯·æ±‚åˆ°GitHubè·å– <code>token</code></li>
<li>å®¢æˆ·ç«¯ä½¿ç”¨ <code>token</code> è·å–ç”¨æˆ·ä¿¡æ¯</li>
</ol>
<p>å¦‚æœç”¨URLçš„è·³è½¬æ¥è¡¨ç°çš„è¯å¤§æ¦‚å°±æ˜¯è¿™æ ·ï¼š</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>blog.com/post/01.html
    ----&gt;
https://github.com/login/oauth/authorize?client_id=xxx&amp;redirect_uri=xxx
    ----&gt;
api.blog.com/?code=xxx        # api.blog.comå°±æ˜¯ä½ å¡«åœ¨GitHub OAuth Appçš„Callback URL
    ----&gt; POST
https://github.com/login/oauth/access_token
    ----&gt;
???
</code></pre></div></div>
<p>å¯¹ï¼é—®é¢˜æ¥äº†ï¼</p>
<p>æ€ä¹ˆè·³è½¬ï¼Ÿè·³å“ªé‡Œï¼Ÿ</p>
<p>ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘è‚¯å®šæ˜¯æƒ³è·³å›<code>blog.com/post/01.html</code>å®ç°æ— ç¼ä½“éªŒå¯¹å§...</p>
<p>ç„¶è€Œå°±è¿™ä¸ªé—®é¢˜ï¼Œä¸ç®¡æ˜¯CSDNï¼Œè¿˜æ˜¯Stack Overflowï¼Œç”šè‡³å®˜æ–¹æ–‡æ¡£ï¼Œ</p>
<p><strong>å…¨éƒ½æ²¡æœ‰ï¼</strong></p>
<p>ç»ˆäºï¼Œåœ¨æ­»äº†ä¸çŸ¥é“å¤šå°‘è„‘ç»†èƒåï¼Œæˆ‘æƒ³å‡ºäº†å¦‚ä¸‹å®ç°è¿‡ç¨‹ï¼š</p>
<ol>
<li>
<p>å‡è®¾ç”¨æˆ·åœ¨<code>blog.com/post/01.html</code>è¿™å¼ é¡µé¢ä¸Šç‚¹å‡»äº†GitHubç™»å½•æŒ‰é’®ï¼Œè¿™ä¸ªç™»å½•æŒ‰é’®ä¸è¦ç›´æ¥è·³è½¬åˆ°GitHubæˆæƒé¡µé¢ï¼Œå…ˆè·³è½¬åˆ°ä½ è‡ªå·±è®¾ç½®çš„GitHub OAuth Appçš„Callback URLï¼Œè¿™é‡Œå‡è®¾æ˜¯<code>api.blog.com</code>ï¼ŒæŠŠå½“å‰é¡µé¢çš„URLä¼ ç»™<code>api.blog.com</code>ï¼Œä¾‹å¦‚ï¼š<code>api.blog.com?url=blog.com/post/01.html</code></p>
</li>
<li>
<p>è¿™æ ·åœ¨è·³è½¬åˆ°<code>api.blog.com</code>çš„æ—¶å€™ï¼Œä½ å°±çŸ¥é“äº†ç‚¹å‡»ç™»å½•çš„æ˜¯å“ªå¼ é¡µé¢äº†ï¼Œè¿™æ—¶å€™å¯ä»¥æŠŠä¼ è¿‡æ¥URLè®°å½•åˆ°<code>localStorage</code>æˆ–è€…Cookieï¼Œç”šè‡³æ˜¯åç«¯çš„Sessionï¼Œåæ­£ä¸ç®¡æ€ä¹ˆæ ·ï¼Œæ‰¾ä¸ªåœ°æ–¹è®°å½•ä¸€ä¸‹å°±å¯ä»¥äº†ï¼Œå› ä¸ºè¿™æ—¶å€™æˆ‘ä»¬è¿˜è¦è·³è½¬åˆ°<code>github.com</code>ï¼Œä¸è®°å½•çš„è¯å°±ä¸¢å¤±äº†æ•°æ®</p>
</li>
<li>
<p>ç”¨æˆ·åœ¨<code>github.com</code>å®Œæˆæˆæƒåï¼Œè¿˜æ˜¯ä¼šè·³è½¬åˆ°<code>api.blog.com</code>ï¼Œå› ä¸ºè·³è½¬å‰è®°å½•äº†æˆæƒå‰ä¼ æ¥çš„é¡µé¢URLï¼Œåœ¨ä½ è·å–åˆ°Tokenä¹‹åï¼Œä½ å¯ä»¥æŠŠURLå†è¯»å–å‡ºæ¥ï¼š</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// localStorage è¿™ä¹ˆç”¨</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">URL</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Cookie è¿™ä¹ˆç”¨</span>
<span class="c1">// è¿™ä¸ªfunction w3cæŠ„æ¥çš„</span>
<span class="kd">function</span> <span class="nx">getCookie</span><span class="p">(</span><span class="nx">cname</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">cname</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">=</span><span class="dl">"</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">ca</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="s1">;</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">ca</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">ca</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">c</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">name</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="dl">""</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">getCookie</span><span class="p">(</span><span class="dl">'</span><span class="s1">URL</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>
</li>
</ol>
<p>è·å–ç”¨æˆ·ä¿¡æ¯çš„è¯·æ±‚å¯ä»¥åœ¨<code>api.blog.com</code>åšï¼Œä¹Ÿå¯ä»¥åƒæˆ‘ä¸€æ ·å¸¦ç€<code>token</code>å›åˆ°<code>blog.com/post/01.html</code>å»åšã€‚</p>
<p>å› ä¸ºè‡ªå·±çš„åšå®¢~~URLç‰¹æ®Šï¼Œåˆæ˜¯Hashåˆæ˜¯URL Param~~(åŸæœ¬æ˜¯å•é¡µAppï¼Œç°åœ¨å·²è°ƒæ•´ä¸ºçº¯é™æ€ï¼Œä½†æ˜¯ä¸å½±å“æ€è·¯)ï¼Œè€Œä¸”ä¹Ÿä¸æƒ³ç”¨æˆ·åœ¨å›åˆ°é¡µé¢çš„æ—¶å€™ï¼ŒURLåé¢è·Ÿç€ä¸€ä¸ªé•¿é•¿çš„<code>token</code>ï¼Œæˆ‘è¿˜æ–°åŠ äº†ä¸€ä¸ªè·³è½¬é¡µé¢ <code>blog.com/r.html</code>ï¼Œè¿™ä¸ªé¡µé¢è´Ÿè´£æ¥æ”¶<code>token</code>å’Œè·³è½¬çš„é¡µé¢ï¼Œå°†<code>token</code>å†™å…¥æµè§ˆå™¨å­˜å‚¨ï¼ˆä¸Šé¢è¯´çš„<code>localStorage</code>æˆ–è€…Cookieï¼‰ä¹‹åå†è¿›è¡Œè·³è½¬ï¼Œåœ¨<code>blog.com/post/01.html</code>å®Œæˆç”¨æˆ·ä¿¡æ¯çš„è°ƒç”¨ååˆ é™¤è®°å½•åœ¨æµè§ˆå™¨å­˜å‚¨é‡Œé¢çš„<code>token</code>ã€‚</p>
<p><img src="/p_assets/201910/nice.gif" alt="" /></p>
<p>è™½ç„¶æµç¨‹è·‘é€šäº†ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯å¾ˆå¥½å¥‡ä¸ºä»€ä¹ˆGitHubå®˜æ–¹æ–‡æ¡£é‡Œå®Œå…¨æ‰¾ä¸åˆ°è¿™ä¸€éƒ¨åˆ†çš„è¯´æ˜ï¼Œåœ¨æœç´¢å¼•æ“ä¸Šä¹Ÿæ‰¾ä¸åˆ°ç›¸å…³æ–‡ç« ...</p>
<p>éšä¾¿å§ï¼Œç°åœ¨çœ‹èµ·æ¥ï¼Œåªèƒ½è¿™æ ·è§£å†³...</p>
</div>
                <div class="page-original">
                  <a class="license" rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Creative Commons License" style="border-width: 0" src="/assets/img/cc.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a>.
                </div>
                <div class="disqus-box">
                  <div id="disqus_thread" class="on">
  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000">
    <path d="M0 0h24v24H0V0z" fill="none" />
    <path d="M20 6h-1v8c0 .55-.45 1-1 1H6v1c0 1.1.9 2 2 2h10l4 4V8c0-1.1-.9-2-2-2zm-3 5V4c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v13l4-4h9c1.1 0 2-.9 2-2z" />
  </svg>
  ç‚¹å‡»åŠ è½½DISQUS
  <div class="clairation"></div>
</div>
<script>
  window.addEventListener('load', function () {
    var Disqus = function () {
      window.disqus_config = function () {
        this.page.url = location.href
        this.page.identifier = location.href
      }
      this.init = function () {
        var _ = this
        var disqus_box = document.getElementById('disqus_thread')
        disqus_box.addEventListener('click', function () {
          disqus_box.classList.remove('on')
          disqus_box.innerHTML = ''
          disqus.startDisqus()
        })
      }
      this.startDisqus = function () {
        var d = document
        var s = d.createElement('script')
        s.src = 'https://jw1dev.disqus.com/embed.js'
        s.setAttribute('data-timestamp', +new Date())
        ;(d.head || d.body).appendChild(s)
      }
    }

    var disqus = new Disqus()
    disqus.init()
  })
</script>

                </div>
              </div>
            </div>
          </section>
          <section class="aside" v-if="!page_small" aria-label="aside">
            <ul>
              
              <li>
                <a href="/about/" class="dontread" title="About Me">ğŸ‘¦ About Me</a>
              </li>
              
              <li>
                <a href="/atom.xml" title="RSS feeds" class="dontread" target="_blank">ğŸš© RSS</a>
              </li>
            </ul>
          </section>
        </div>
        <footer>Â© <span class="copy_right_year">2018 - 2021</span><a href="/" class="footer-link">ä¸€ä¸ªçƒçš„åšå®¢</a>code with â¤</footer>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.min.js"></script>
    
    <script src="/assets/js/post.js"></script>
  </body>
</html>
