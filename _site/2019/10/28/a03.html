<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ä½¿ç”¨JavaScriptè¾¾æˆ background-size: cover çš„æ•ˆæœ - Jacky's Blog</title>
    <link rel="shortcut icon" href="/favicon.png" type="image/x-icon" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Fira+Mono&family=Nunito&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/assets/css/index.min.css" />
    <meta name="keywords" content="ä¸€ä¸ªçƒ,å‰ç«¯,ç½‘é¡µ,web,æŠ€æœ¯,css3,html5,frontend,front-end,ableton,live,music,production,ç¼–æ›²,éŸ³ä¹åˆ¶ä½œ,åˆ¶ä½œäºº,æ‘„å½±,JavaScript,CSS,IE,å…¼å®¹" id="keywords" />
    <meta name="description" content="Frontend Developer / Music Producer" />
    
  </head>
  <body>
    <div id="app">
      <div class="app-wrap">
        <header>
  <div class="logo">
    <a href="/" title="Click here to navigate homepage" id="header">
      <div class="img">
        <img src="/assets/img/logo-black.png" alt="logo" class="dark" />
        <img src="/assets/img/logo.png" alt="logo" class="light" />
      </div>
    </a>
  </div>
  <div class="slogan" ref="slogan">
    Frontend Developer / Music Producer
  </div>
  <div class="page-small-menu" v-if="page_small">
    <ul>
      
      <li>
        <a href="/about/">About Me</a>
      </li>
      
      <li>
        <a href="/atom.xml" target="_blank">RSS</a>
      </li>
    </ul>
  </div>
</header>
        <div class="page-wrap">
          <section class="pages" style="padding-top: 20px">
            <div class="page">
              <div class="wrap">
                <h2 class="page-header">ä½¿ç”¨JavaScriptè¾¾æˆ background-size: cover çš„æ•ˆæœ</h2>
                 
                <div class="page-date">
                  <span>ğŸ‘¨â€ğŸ’» 2019-10-28</span>
                  
                </div>
                
                <div class="page-content"><p>æœ€è¿‘æœ‰ä¸€ä¸ªé¡¹ç›®ï¼Œé¢†å¯¼è¦æ±‚ï¼šè¦è®©ä¸€ä¸ª<strong>è§†é¢‘</strong>åœ¨<strong>ä¸€å±æ˜¾ç¤º</strong>çš„æƒ…å†µä¸‹<strong>ä¸èƒ½æ”¹å˜å®½é«˜æ¯”</strong> and <strong>é€‚é…å„ç§åˆ†è¾¨ç‡</strong> and <strong>å…¼å®¹åˆ°IE 7</strong>ã€‚å˜¶~ï¼Œæœ‰ç‚¹æ£˜æ‰‹ï¼Œå¯¹äºè¦å…¼å®¹åˆ°IE 7çš„é¡¹ç›®ï¼Œå†™CSSç®€ç›´å¤´ç–¼ã€‚</p>
<p>ä¸è¿‡ä¸æ˜¯æˆ‘åšï¼ˆæ¬¸å˜¿ï¼‰ï¼Œåˆ«äººä¹Ÿæ²¡åšå‡ºæ¥ï¼Œæˆ‘ä¹Ÿæ²¡ç«™å‡ºæ¥ï¼ˆé¢å­æœ€é‡è¦ï¼‰ï¼Œäºæ˜¯é¢†å¯¼ä¸å¾—ä¸æ”¾ä½è¦æ±‚ï¼Œå½“ç„¶è¿™éƒ½æ˜¯åè¯äº†ã€‚</p>
<p><img src="/p_assets/201910/zhazha.jpg" alt="" /></p>
<p>åæ¥æƒ³ï¼Œå¦‚æœæˆ‘æ¥åšçš„è¯ï¼Œæˆ‘ä¼šæ€ä¹ˆåšï¼Ÿå¯¹äºé¢†å¯¼çš„è¦æ±‚ï¼Œæˆ‘è„‘å­é‡Œç¬¬ä¸€ä¸ªé—ªè¿‡çš„å°±æ˜¯<code>background-size: cover</code>è¿™ä¸ªç©æ„å„¿ï¼Œä½†æ˜¯ç¬¬ä¸€ï¼Œè¿™ä¸ªæ˜¯CSS 3çš„å±æ€§ï¼ŒIE 8å°±æ­‡èœäº†ï¼Œæ›´åˆ«è¯´IE 7äº†ï¼Œç¬¬äºŒï¼Œè¿™ä¸ªå±æ€§åªå¯¹å›¾ç‰‡æœ‰ç”¨......</p>
<p>é‚£èƒ½ä¸èƒ½ç”¨jsæ¥æ¨¡æ‹Ÿå‘¢ï¼Ÿ</p>
<p>è¯´å¹²å°±å¹²ï¼Œå½“ä¸‹å°±å¼€å§‹ç ”ç©¶<code>cover</code>å±æ€§æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Œæœ€åç»“è®ºæ˜¯ï¼š</p>
<p><code>cover</code>åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œåªæ˜¯å•çº¯çš„å°†å›¾ç‰‡å®½åº¦æ”¾åˆ°ä¸å®¹å™¨ä¸€æ ·å®½ï¼Œåœ¨ç¼©æ”¾è¿‡ç¨‹ä¸­ï¼Œ<strong>å½“å›¾ç‰‡é«˜åº¦å°äºå®¹å™¨é«˜åº¦æ—¶</strong>ï¼Œ<strong>ä¼šæ ¹æ®åŸå§‹å›¾ç‰‡çš„å®½é«˜æ¯”(ratio)æ¥æ”¾å¤§å›¾ç‰‡å®½åº¦</strong>ï¼Œä½¿åŸå§‹å›¾ç‰‡å§‹ç»ˆæ’‘æ»¡å®¹å™¨ã€‚</p>
<p>å¬èµ·æ¥æœ‰ç‚¹ç»•ï¼Œç›´æ¥ä¸Šä»£ç ï¼š</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">;(</span><span class="kd">function</span><span class="p">(</span><span class="nx">w</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">kkkover</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">_</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">w</span><span class="p">.</span><span class="nx">onresize</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="nx">_</span><span class="p">.</span><span class="nx">resized</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="nx">obj</span><span class="p">.</span><span class="nx">ratio</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">clientHeight</span> <span class="o">/</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">;</span>
                <span class="nx">_</span><span class="p">.</span><span class="nx">calcStyle</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">obj</span><span class="p">.</span><span class="nx">ratio</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">clientHeight</span> <span class="o">/</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">;</span>
            <span class="nx">_</span><span class="p">.</span><span class="nx">calcStyle</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">calcStyle</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">obj</span><span class="p">.</span><span class="nx">wrapCell</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">relative</span><span class="dl">'</span><span class="p">;</span>
            <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">absolute</span><span class="dl">'</span><span class="p">;</span>
            <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">50%</span><span class="dl">'</span><span class="p">;</span>
            <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">zIndex</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">;</span>
            <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">50%</span><span class="dl">'</span><span class="p">;</span>
            <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">;</span>
            <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginLeft</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">clientWidth</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">;</span>
            <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginTop</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">clientHeight</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">clientHeight</span> <span class="o">&lt;=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">wrapCell</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">){</span>
                <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">maxWidth</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span><span class="p">;</span>
                <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">wrapCell</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">;</span>
                <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">wrapCell</span><span class="p">.</span><span class="nx">clientHeight</span> <span class="o">/</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">ratio</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">;</span>
                <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginTop</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">clientHeight</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span>
                <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginLeft</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">clientWidth</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">wrapCell</span><span class="p">.</span><span class="nx">clientWidth</span> <span class="o">&gt;</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">){</span>
                <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">;</span>
                <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">auto</span><span class="dl">'</span><span class="p">;</span>
                <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginLeft</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">clientWidth</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">;</span>
                <span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginTop</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">clientHeight</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">resized</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">_</span><span class="p">.</span><span class="nx">calcStyle</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">kkkover</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">wp</span> <span class="o">=</span> <span class="nx">w</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">||</span> <span class="nx">w</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">||</span> <span class="nx">w</span><span class="p">;</span>
    <span class="nx">wp</span><span class="p">.</span><span class="nx">kkkover</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">init</span><span class="p">;</span>
<span class="p">}(</span><span class="nb">window</span><span class="p">));</span>
</code></pre></div></div>
<p>ä½¿ç”¨çš„è¯å¤§æ¦‚å°±æ˜¯è¿™æ ·ï¼š</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"test"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"path/to/img"</span> <span class="na">id=</span><span class="s">"test_img"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">kkkover</span><span class="p">({</span>
    <span class="na">wrapCell</span><span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">test</span><span class="dl">'</span><span class="p">),</span> <span class="c1">// ä¼ å…¥å®¹å™¨</span>
    <span class="na">img</span><span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">test_img</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// ä¼ å…¥å®¹å™¨ä¸­çš„å›¾ç‰‡</span>
<span class="p">});</span>
</code></pre></div></div>
<p>å¯ä»¥åœ¨è¿™é‡Œçœ‹ä¸€ä¸‹<a href="/p_assets/201910/a03_demo/">æ¼”ç¤º</a>ã€‚ä»£ç å·²ç»æµ‹è¯•ï¼Œå¯ä»¥å…¼å®¹åˆ°IE 7ã€‚</p>
<p>å¯¹äºè§†é¢‘ä¹Ÿæ˜¯ä¸€æ ·çš„ç”¨æ³•ï¼Œ<code>img</code>ä¼ è§†é¢‘å…ƒç´ å°±å¯ä»¥äº†ã€‚</p>
<p>âœŒ</p>
</div>
                <div class="page-original">
                  <a class="license" rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Creative Commons License" style="border-width: 0" src="/assets/img/cc.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a>.
                </div>
              </div>
            </div>
          </section>
          <section class="aside" v-if="!page_small" aria-label="aside">
            <ul>
              
              <li>
                <a href="/about/" class="dontread" title="About Me">ğŸ‘¦ About Me</a>
              </li>
              
              <li>
                <a href="/atom.xml" title="RSS feeds" class="dontread" target="_blank">ğŸš© RSS</a>
              </li>
            </ul>
          </section>
        </div>
        <footer>Â© <span class="copy_right_year">2018 - 2021</span><a href="/" class="footer-link">Jacky's Blog</a>code with â¤</footer>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@0.21.1/dist/axios.min.js"></script>
    <script src="/assets/js/base.js"></script>
    <script src="/assets/js/components/appAudio.js"></script>
    <script src="/assets/js/components/appAudioDiff.js"></script>
    <script src="/assets/js/post.js"></script>
  </body>
</html>
