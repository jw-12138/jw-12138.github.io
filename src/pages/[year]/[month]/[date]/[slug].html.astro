---
import {getCollection} from 'astro:content'

export async function getStaticPaths() {
  const allPosts = await getCollection('posts')
  return allPosts.map(post => {
    let date_str = post.slug
    let date_array = date_str.split('-')
    let year = date_array[0]
    let month = date_array[1]
    let day = date_array[2]
    let postPath = post.slug.slice(11)
    return {
      params: {
        slug: postPath,
        year: year,
        month: month,
        date: day
      },
      props: {
        entry: post
      }
    }
  })
}

let {year, month, date, slug} = Astro.params

---

<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="generator" content={Astro.generator}/>
  <title>一个球的博客</title>
  <meta http-equiv="refresh" content={`0; url=/${year}/${month}/${date}/${slug}`}>
</head>

<body>
</body>

</html>